REST-сервис по сбору статистики посещаемости вебсайта

В сервисе присутствуют два метода:

POST http://localhost:8080/statistics&user={user}&url={url} - метод по добавлению нового события посещения. 

Ответ содержит :
totalVisitEventsForPeriod - количество посещений за текущие сутки.
uniqueUsersForPeriod - уникальных пользователей за текущие сутки.

GET http://localhost:8080/statistics?startDate={дата в ISO формате (2018-06-25)}&endDate={endDate}

Ответ содержит:
totalVisitEventsForPeriod - количество посещений за период.
uniqueUsersForPeriod - уникальных пользователей за период.
regularUsersForPeriod - постоянных пользователей за период. (количество посещеных уникальных сайтов >= 10)

Выбраный тип хранения данных с всего одной таблицей был выбран исходя из отсутствия необходимости в таблицах с пользователями и сайтами по отдельности, тк они бы больше нигде не использовались., но появились бы лишние джоины (в лучшем случае).

Для установки данного приложения необходимо выполнить команду maven :

1) mvn clean package spring-boot:run

2) mvn clean package
Далее выполнить следующую команду в терминале:
java -jar  target/SiteVisitCounter-0.0.1-SNAPSHOT.jar

Далее создать запись можно с помощью плагина в браузере который может отправлять POST запросы, либо какого - нибудь приложения для тестирования запросов, подойдет например jmeter
GET запрос можно проверить прям в строке браузера

При сборке выполняются юнит и интеграционные тесты.

Так же можно запустить приложение из IDE.

При старте приложения база предзаполняется некоторыми значениями:

По умолчанию создается 1  постоянный пользователь (10 сайтов) за сегодня - 2 дня,  3 уникальных пользователя, 14 событий всего за 3 дня (сегодня - 2 дня)

Это класс DataLoader. 

Загрузку начальных данных можно отменить :

data.preloading.enabled=false

в файле application.properties


так же можно менять параметры в тестах на свое усмотрение.

Все вопросы можно направлять по адресу: valan.skeeba@gmail.com
